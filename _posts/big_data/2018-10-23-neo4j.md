---
layout: post
title: neo4j-python工具py2neo
date: 2018-10-23
categories: neo4j
tag: neo4j

---

* content
{: toc}

## 常见用法

```python
from py2neo import Graph, Node, Relationship, cyper

graph = Graph()
# 匹配节点
len(graph.nodes.match("Person", age=33))
# 筛选出部分属性
graph.run("MATCH (a:Person) RETURN a.name, a.born LIMIT 4").data
# 筛选出部分属性并转化为dataframe
graph.run("MATCH (a:Person) RETURN a.name, a.born LIMIT 4").to_data_frame()
# 根据属性筛选出节点
g.run("MATCH (a) WHERE a.email={x} RETURN a.name", x="bob@acme.com").evaluate()
```

```python
from py2neo import Graph, NodeMatcher

graph = Graph()
matcher = NodeMatcher(graph)
# 匹配首个符合条件的节点
matcher.match("Person", name="Keanu Reeves").first()
# 匹配符合条件的节点，并排序， 并返回指定数量
list(matcher.match("Person").where("_.name =~ 'K.*'").order_by("_.name").limit(3))
 # [(_224:Person {born: 1964, name: 'Keanu Reeves'}),
 # (_57:Person {born: 1957, name: 'Kelly McGillis'}),
 # (_83:Person {born: 1962, name: 'Kelly Preston'})]
```

```python
from py2neo.cypher import cypher_escape

# 输出cypher语句
"MATCH (a:{label}) RETURN id(a)".format(label=cypher_escape("Employee of the Month"))
# 'MATCH (a:`Employee of the Month`) RETURN id(a)'
```

---
## 参考文献  

[^1]: Functions - Spark SQL, Built-in Functions. (2018). Spark.apache.org. Retrieved 25 September 2018, from https://spark.apache.org/docs/2.3.0/api/sql/index.html#from_unixtime
